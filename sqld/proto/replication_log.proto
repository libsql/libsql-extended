syntax = "proto3";
package wal_log;

message LogOffset {
    uint64 next_offset = 1;
}

message HelloRequest {}

message HelloResponse {
    string log_id = 3;
}

message Frame {
    bytes data = 1;
}

message Frames {
    repeated Frame frames = 1;
}

message BatchEntriesResponse {
    Frames frames = 1;
    HelloResponse hs_response = 2;
}

service ReplicationLog {
    rpc Hello(HelloRequest) returns (HelloResponse) {}
    rpc LogEntries(LogOffset) returns (stream Frame) {}
    rpc BatchLogEntries(LogOffset) returns (BatchEntriesResponse) {}
    rpc Snapshot(LogOffset) returns (stream Frame) {}
}
